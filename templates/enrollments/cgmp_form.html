<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGMP Registration - Council for General Ministry Professionals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <i class="fas fa-church text-2xl text-blue-600 mr-3"></i>
                    <h1 class="text-xl font-semibold text-gray-900">CGMP Registration</h1>
                </div>
                <div class="text-sm text-gray-500">
                    Council for General Ministry Professionals
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700">Registration Progress</span>
                <span class="text-sm text-gray-500" id="progress-text">Step 1 of 5</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" id="progress-bar" style="width: 20%"></div>
            </div>
        </div>

        <!-- Error Messages Container -->
        <div id="error-container" class="hidden mb-6">
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                <div class="flex">
                    <i class="fas fa-exclamation-triangle text-red-600 mr-3 mt-1"></i>
                    <div>
                        <h3 class="text-red-800 font-medium">Please correct the following errors:</h3>
                        <ul id="error-list" class="text-red-700 text-sm mt-2 space-y-1"></ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Container -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <form id="cgmp-form" method="post" enctype="multipart/form-data" novalidate>
                {% csrf_token %}
                
                <!-- Section 1: Personal Information -->
                <div class="form-section active" id="section-1">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-user text-blue-600 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-gray-900">Personal Information</h2>
                        </div>
                        <p class="text-gray-600 text-sm">Please provide your basic personal details exactly as they appear on your official documents</p>
                    </div>
                    
                    <div class="p-6 space-y-6">
                        <!-- Title, Gender, Initials -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-address-card mr-2"></i>Title
                                </label>
                                <select name="title" required class="form-input">
                                    <option value="">Select Title</option>
                                    <option value="Mr">Mr</option>
                                    <option value="Mrs">Mrs</option>
                                    <option value="Miss">Miss</option>
                                    <option value="Dr">Dr</option>
                                    <option value="Prof">Prof</option>
                                    <option value="Rev">Rev</option>
                                    <option value="Pastor">Pastor</option>
                                    <option value="Bishop">Bishop</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-venus-mars mr-2"></i>Gender
                                </label>
                                <select name="gender" required class="form-input">
                                    <option value="">Select Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-signature mr-2"></i>Initials
                                </label>
                                <input type="text" name="initials" required maxlength="10" class="form-input" placeholder="e.g., J.P.">
                            </div>
                        </div>

                        <!-- Names -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-user mr-2"></i>First Name
                                </label>
                                <input type="text" name="first_name" required maxlength="150" class="form-input">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-user mr-2"></i>Last Name
                                </label>
                                <input type="text" name="last_name" required maxlength="150" class="form-input">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-heart mr-2"></i>Preferred Name
                                </label>
                                <input type="text" name="preferred_name" maxlength="50" class="form-input" placeholder="How you'd like to be addressed">
                            </div>
                        </div>

                        <!-- ID Numbers and Birth Date -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-id-card mr-2"></i>ID Number
                                </label>
                                <input type="text" name="id_number" required maxlength="20" class="form-input" placeholder="13-digit SA ID number">
                                <p class="text-xs text-gray-500 mt-1">South African ID number (13 digits)</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-passport mr-2"></i>Passport Number
                                </label>
                                <input type="text" name="passport_number" maxlength="30" class="form-input" placeholder="For non-SA residents only">
                                <p class="text-xs text-gray-500 mt-1">Required if not SA citizen</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-calendar mr-2"></i>Date of Birth
                                </label>
                                <input type="date" name="date_of_birth" required class="form-input">
                            </div>
                        </div>

                        <!-- Race, Disability -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-users mr-2"></i>Race
                                </label>
                                <input type="text" name="race" required maxlength="20" class="form-input" placeholder="As per official documents">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-universal-access mr-2"></i>Disability
                                </label>
                                <input type="text" name="disability" maxlength="100" class="form-input" placeholder="Please specify if applicable">
                            </div>
                        </div>

                        <!-- Languages -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-language mr-2"></i>Home Language
                                </label>
                                <input type="text" name="home_language" maxlength="50" class="form-input" placeholder="Primary language">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-globe mr-2"></i>Other Languages
                                </label>
                                <input type="text" name="other_languages" maxlength="100" class="form-input" placeholder="Separate with commas">
                            </div>
                        </div>

                        <!-- Religious Affiliation -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-cross mr-2"></i>Religious Affiliation
                            </label>
                            <input type="text" name="religious_affiliation" maxlength="100" class="form-input" placeholder="Your denomination or religious background">
                        </div>
                    </div>
                </div>

                <!-- Section 2: Contact Information -->
                <div class="form-section" id="section-2">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-address-book text-blue-600 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-gray-900">Contact Information</h2>
                        </div>
                        <p class="text-gray-600 text-sm">Please provide accurate contact details for communication</p>
                    </div>
                    
                    <div class="p-6 space-y-6">
                        <!-- Email and Cell -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-envelope mr-2"></i>Email Address
                                </label>
                                <input type="email" name="email" required maxlength="254" class="form-input" placeholder="your.email@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-mobile-alt mr-2"></i>Cell Phone
                                </label>
                                <input type="tel" name="cell" required maxlength="20" class="form-input" placeholder="083 123 4567">
                            </div>
                        </div>

                        <!-- Additional Phone Numbers -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-phone mr-2"></i>Work Phone
                                </label>
                                <input type="tel" name="tel_work" maxlength="20" class="form-input" placeholder="011 123 4567">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-home mr-2"></i>Home Phone
                                </label>
                                <input type="tel" name="tel_home" maxlength="20" class="form-input" placeholder="011 123 4567">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-fax mr-2"></i>Fax
                                </label>
                                <input type="tel" name="fax" maxlength="20" class="form-input" placeholder="086 123 4567">
                            </div>
                        </div>

                        <!-- Website -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-globe mr-2"></i>Website
                            </label>
                            <input type="url" name="website" maxlength="200" class="form-input" placeholder="https://yourwebsite.com">
                        </div>

                        <!-- Addresses -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-map-marker-alt mr-2"></i>Street Address
                                </label>
                                <textarea name="street_address" rows="3" class="form-input" placeholder="Your physical address"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-mail-bulk mr-2"></i>Postal Address
                                </label>
                                <textarea name="postal_address" rows="3" class="form-input" placeholder="Leave blank if same as street address"></textarea>
                            </div>
                        </div>

                        <!-- Location Details -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-mail-bulk mr-2"></i>Postal Code
                                </label>
                                <input type="text" name="postal_code" maxlength="10" class="form-input" placeholder="1234">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-map mr-2"></i>Province
                                </label>
                                <input type="text" name="province" maxlength="50" class="form-input" placeholder="Gauteng">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-flag mr-2"></i>Country
                                </label>
                                <input type="text" name="country" maxlength="50" value="South Africa" required class="form-input">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Qualifications & Professional Background -->
                <div class="form-section" id="section-3">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-graduation-cap text-blue-600 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-gray-900">Qualifications & Professional Background</h2>
                        </div>
                        <p class="text-gray-600 text-sm">Educational qualifications and work experience</p>
                    </div>
                    
                    <div class="p-6 space-y-6">
                        <!-- Education -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-university mr-2"></i>Highest Qualification
                                </label>
                                <input type="text" name="highest_qualification" maxlength="200" class="form-input" placeholder="e.g., Bachelor of Theology">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-calendar mr-2"></i>Qualification Date
                                </label>
                                <input type="date" name="qualification_date" required class="form-input">
                            </div>
                        </div>

                        <!-- Institution -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                <i class="fas fa-school mr-2"></i>Qualification Institution
                            </label>
                            <input type="text" name="qualification_institution" required maxlength="200" class="form-input" placeholder="Name of educational institution">
                        </div>

                        <!-- Work Details -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-briefcase mr-2"></i>Current Occupation
                            </label>
                            <input type="text" name="occupation" maxlength="100" class="form-input" placeholder="Your current job title">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-tasks mr-2"></i>Work Experience Description
                            </label>
                            <textarea name="work_description" rows="4" class="form-input" placeholder="Describe your relevant work experience and responsibilities"></textarea>
                        </div>

                        <!-- Ministry Experience -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-calendar-check mr-2"></i>Years in Ministry
                                </label>
                                <input type="number" name="years_ministry" min="0" max="70" value="0" required class="form-input">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-calendar mr-2"></i>Additional Months
                                </label>
                                <input type="number" name="months_ministry" min="0" max="11" value="0" required class="form-input">
                            </div>
                        </div>

                        <!-- Background Checks -->
                        <div class="space-y-4 border-t pt-6">
                            <h3 class="text-lg font-medium text-gray-900">Background Verification</h3>
                            
                            <div class="space-y-4">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <label class="flex items-start">
                                        <input type="checkbox" name="disciplinary_action" class="mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <span class="text-sm text-gray-700">I have been subject to disciplinary action by any professional body</span>
                                    </label>
                                    <div class="mt-3 disciplinary-details" style="display: none;">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">
                                            <i class="fas fa-exclamation-triangle mr-2"></i>Disciplinary Action Details
                                        </label>
                                        <textarea name="disciplinary_description" rows="3" class="form-input" placeholder="Please provide full details of the disciplinary action"></textarea>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <label class="flex items-start">
                                        <input type="checkbox" name="felony_conviction" class="mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <span class="text-sm text-gray-700">I have been convicted of a felony</span>
                                    </label>
                                    <div class="mt-3 felony-details" style="display: none;">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">
                                            <i class="fas fa-gavel mr-2"></i>Felony Conviction Details
                                        </label>
                                        <textarea name="felony_description" rows="3" class="form-input" placeholder="Please provide full details of the conviction"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 4: Ministry Information -->
                <div class="form-section" id="section-4">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-cross text-blue-600 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-gray-900">Ministry Information</h2>
                        </div>
                        <p class="text-gray-600 text-sm">Details about your ministry background and calling</p>
                    </div>
                    
                    <div class="p-6 space-y-6">
                        <!-- Ordination Details -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2 required">
                                    <i class="fas fa-graduation-cap mr-2"></i>Ordination Status
                                </label>
                                <select name="ordination_status" required class="form-input">
                                    <option value="">Select Status</option>
                                    <option value="ordained">Ordained</option>
                                    <option value="licensed">Licensed</option>
                                    <option value="certified">Certified</option>
                                    <option value="trainee">Trainee</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-calendar-alt mr-2"></i>Ordination Date
                                </label>
                                <input type="date" name="ordination_date" class="form-input">
                                <p class="text-xs text-gray-500 mt-1">Leave blank if not ordained</p>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-church mr-2"></i>Ordaining Body
                            </label>
                            <input type="text" name="ordaining_body" maxlength="200" class="form-input" placeholder="Name of the organization that ordained you">
                        </div>

                        <!-- Current Ministry -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-user-tie mr-2"></i>Current Ministry Role
                                </label>
                                <input type="text" name="current_ministry_role" maxlength="100" class="form-input" placeholder="e.g., Senior Pastor, Youth Minister">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-place-of-worship mr-2"></i>Congregation Name
                                </label>
                                <input type="text" name="congregation_name" maxlength="200" class="form-input" placeholder="Name of your church/congregation">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-cross mr-2"></i>Denomination
                            </label>
                            <input type="text" name="denomination" maxlength="100" class="form-input" placeholder="e.g., Methodist, Baptist, Pentecostal">
                        </div>

                        <!-- Ministry Activities -->
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <label class="flex items-center">
                                <input type="checkbox" name="involved_pastoral" class="mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <span class="text-sm font-medium text-gray-700">
                                    <i class="fas fa-hands-helping mr-2"></i>Currently involved in pastoral work
                                </span>
                            </label>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-list mr-2"></i>Pastoral Responsibilities
                            </label>
                            <textarea name="pastoral_responsibilities" rows="4" class="form-input" placeholder="Describe your pastoral duties and responsibilities"></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-microphone mr-2"></i>Preaching Frequency
                            </label>
                            <select name="preaching_frequency" class="form-input">
                                <option value="">Select Frequency</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="occasionally">Occasionally</option>
                                <option value="rarely">Rarely</option>
                            </select>
                        </div>

                        <!-- Professional Development -->
                        <div class="space-y-4 border-t pt-6">
                            <h3 class="text-lg font-medium text-gray-900">Professional Development</h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="registered_elsewhere" class="mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <span class="text-sm font-medium text-gray-700">
                                            <i class="fas fa-certificate mr-2"></i>Registered with other professional bodies
                                        </span>
                                    </label>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="continuing_education" class="mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <span class="text-sm font-medium text-gray-700">
                                            <i class="fas fa-book mr-2"></i>Engaged in continuing education
                                        </span>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-award mr-2"></i>Other Professional Registrations
                                </label>
                                <textarea name="other_registrations" rows="3" class="form-input" placeholder="List other professional registrations or memberships"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 5: Documents & Legal Agreements -->
                <div class="form-section" id="section-5">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-file-upload text-blue-600 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-gray-900">Documents & Legal Agreements</h2>
                        </div>
                        <p class="text-gray-600 text-sm">Upload required documents and confirm legal agreements</p>
                    </div>
                    
                    <div class="p-6 space-y-6">
                        <!-- Required Documents List -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h3 class="font-medium text-blue-900 mb-2">Required Documents</h3>
                            <ul class="text-sm text-blue-800 space-y-1">
                                <li><i class="fas fa-check mr-2"></i>Copy of ID Document</li>
                                <li><i class="fas fa-check mr-2"></i>Academic Qualifications</li>
                                <li><i class="fas fa-check mr-2"></i>Ordination Certificate (if applicable)</li>
                                <li><i class="fas fa-check mr-2"></i>Professional References (2 required)</li>
                                <li><i class="fas fa-check mr-2"></i>Passport Copy (if non-SA resident)</li>
                            </ul>
                        </div>

                        <!-- File Upload Area -->
                        <div id="document-upload-area">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-paperclip mr-2"></i>Upload Documents
                            </label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors">
                                <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                <p class="text-gray-600">Drag and drop files here or click to browse</p>
                                <input type="file" name="documents" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" class="hidden" id="file-input">
                                <button type="button" onclick="document.getElementById('file-input').click()" class="mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                                    Select Files
                                </button>
                                <p class="text-xs text-gray-500 mt-2">Maximum 10 files, 10MB each. Accepted formats: PDF, DOC, DOCX, JPG, PNG</p>
                            </div>
                            <div id="file-list" class="mt-4 space-y-2"></div>
                        </div>

                        <!-- Legal Agreements -->
                        <div class="border-t pt-6 space-y-4">
                            <h3 class="text-lg font-medium text-gray-900">Legal Agreements</h3>
                            
                            <div class="space-y-4">
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <label class="flex items-start">
                                        <input type="checkbox" name="popi_act" required class="mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <span class="text-sm text-gray-700">
                                            <strong>I agree to the Protection of Personal Information Act (POPIA)</strong><br>
                                            <span class="text-gray-600">I understand that my personal information will be processed in accordance with POPIA and the organization's privacy policy.</span>
                                        </span>
                                    </label>
                                </div>

                                <div class="border border-gray-200 rounded-lg p-4">
                                    <label class="flex items-start">
                                        <input type="checkbox" name="terms_accepted" required class="mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <span class="text-sm text-gray-700">
                                            I agree to the <a href="#" class="text-blue-600 hover:underline font-medium">Terms and Conditions</a> and <a href="#" class="text-blue-600 hover:underline font-medium">Privacy Policy</a>
                                        </span>
                                    </label>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <label class="flex items-start">
                                        <input type="checkbox" name="information_accurate" required class="mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                        <span class="text-sm text-gray-700">
                                            <strong>I certify that all information provided is true and accurate</strong><br>
                                            <span class="text-gray-600">I understand that providing false information may result in the rejection of my application or termination of membership.</span>
                                        </span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="p-6 bg-gray-50 border-t flex justify-between">
                    <button type="button" id="prev-btn" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors hidden">
                        <i class="fas fa-chevron-left mr-2"></i>Previous
                    </button>
                    <div class="flex space-x-3">
                        <button type="button" id="next-btn" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                            Next <i class="fas fa-chevron-right ml-2"></i>
                        </button>
                        <button type="submit" id="submit-btn" class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors hidden">
                            <i class="fas fa-paper-plane mr-2"></i>Submit Application
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg text-center">
            <i class="fas fa-spinner fa-spin text-3xl text-blue-600 mb-4"></i>
            <p class="text-lg font-medium">Submitting your application...</p>
            <p class="text-sm text-gray-600">Please do not close this window</p>
        </div>
    </div>

    <style>
        .form-section {
            display: none;
        }
        
        .form-section.active {
            display: block;
        }
        
        .form-input {
            @apply w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors;
        }
        
        .form-input:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-input.error {
            @apply border-red-500 ring-red-500;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }
        
        .required::after {
            content: " *";
            color: #ef4444;
        }
        
        .field-error {
            @apply text-red-600 text-sm mt-1;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .toast-notification {
            @apply fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 text-white transition-all duration-300 transform translate-x-full;
        }
        
        .toast-notification.show {
            @apply translate-x-0;
        }
    </style>

    <!-- JavaScript - Use your updated professional JavaScript here -->
    <script>
        // Initialize the professional form manager
        class ProfessionalCGMPForm {
            constructor() {
                this.currentSection = 1;
                this.totalSections = 5;
                this.errors = {};
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.showSection(1);
                this.setupConditionalFields();
            }
            
            setupEventListeners() {
                document.getElementById('next-btn').addEventListener('click', () => this.handleNext());
                document.getElementById('prev-btn').addEventListener('click', () => this.handlePrevious());
                document.getElementById('submit-btn').addEventListener('click', (e) => this.handleSubmit(e));
                
                // Real-time validation
                const inputs = document.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    input.addEventListener('blur', () => this.validateField(input));
                    input.addEventListener('input', () => this.clearFieldError(input));
                });
            }
            
            setupConditionalFields() {
                // Disciplinary action toggle
                const disciplinaryCheckbox = document.querySelector('input[name="disciplinary_action"]');
                const disciplinaryDetails = document.querySelector('.disciplinary-details');
                disciplinaryCheckbox.addEventListener('change', () => {
                    disciplinaryDetails.style.display = disciplinaryCheckbox.checked ? 'block' : 'none';
                });
                
                // Felony conviction toggle
                const felonyCheckbox = document.querySelector('input[name="felony_conviction"]');
                const felonyDetails = document.querySelector('.felony-details');
                felonyCheckbox.addEventListener('change', () => {
                    felonyDetails.style.display = felonyCheckbox.checked ? 'block' : 'none';
                });
                
                // Ordination status validation
                const ordinationStatus = document.querySelector('select[name="ordination_status"]');
                ordinationStatus.addEventListener('change', () => this.validateOrdinationFields());
            }
            
            validateOrdinationFields() {
                const status = document.querySelector('select[name="ordination_status"]').value;
                const dateField = document.querySelector('input[name="ordination_date"]');
                const bodyField = document.querySelector('input[name="ordaining_body"]');
                
                if (['ordained', 'licensed'].includes(status)) {
                    dateField.required = true;
                    bodyField.required = true;
                } else {
                    dateField.required = false;
                    bodyField.required = false;
                }
            }
            
            validateField(field) {
                this.clearFieldError(field);
                let isValid = true;
                
                // Required field validation
                if (field.required && !field.value.trim()) {
                    this.showFieldError(field, 'This field is required');
                    isValid = false;
                }
                
                // Email validation
                if (field.type === 'email' && field.value) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(field.value)) {
                        this.showFieldError(field, 'Please enter a valid email address');
                        isValid = false;
                    }
                }
                
                // ID number validation
                if (field.name === 'id_number' && field.value) {
                    if (!/^\d{13}$/.test(field.value)) {
                        this.showFieldError(field, 'ID number must be exactly 13 digits');
                        isValid = false;
                    }
                }
                
                return isValid;
            }
            
            showFieldError(field, message) {
                field.classList.add('error');
                
                const existingError = field.parentElement.querySelector('.field-error');
                if (existingError) existingError.remove();
                
                const errorDiv = document.createElement('div');
                errorDiv.className = 'field-error';
                errorDiv.textContent = message;
                field.parentElement.appendChild(errorDiv);
                
                this.errors[field.name] = message;
            }
            
            clearFieldError(field) {
                field.classList.remove('error');
                const errorDiv = field.parentElement.querySelector('.field-error');
                if (errorDiv) errorDiv.remove();
                delete this.errors[field.name];
            }
            
            validateSection(sectionNumber) {
                const section = document.getElementById(`section-${sectionNumber}`);
                const fields = section.querySelectorAll('input, select, textarea');
                let isValid = true;
                
                fields.forEach(field => {
                    if (!this.validateField(field)) {
                        isValid = false;
                    }
                });
                
                return isValid;
            }
            
            showSection(sectionNumber) {
                // Hide all sections
                document.querySelectorAll('.form-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show current section
                document.getElementById(`section-${sectionNumber}`).classList.add('active');
                
                // Update progress
                const progress = (sectionNumber / this.totalSections) * 100;
                document.getElementById('progress-bar').style.width = `${progress}%`;
                document.getElementById('progress-text').textContent = `Step ${sectionNumber} of ${this.totalSections}`;
                
                // Update buttons
                document.getElementById('prev-btn').classList.toggle('hidden', sectionNumber === 1);
                document.getElementById('next-btn').classList.toggle('hidden', sectionNumber === this.totalSections);
                document.getElementById('submit-btn').classList.toggle('hidden', sectionNumber !== this.totalSections);
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            handleNext() {
                if (this.validateSection(this.currentSection)) {
                    this.currentSection++;
                    this.showSection(this.currentSection);
                } else {
                    this.showErrorSummary();
                }
            }
            
            handlePrevious() {
                if (this.currentSection > 1) {
                    this.currentSection--;
                    this.showSection(this.currentSection);
                }
            }
            
            handleSubmit(e) {
                e.preventDefault();
                
                // Validate all sections
                let allValid = true;
                for (let i = 1; i <= this.totalSections; i++) {
                    if (!this.validateSection(i)) {
                        allValid = false;
                        this.currentSection = i;
                        this.showSection(i);
                        this.showErrorSummary();
                        break;
                    }
                }
                
                if (allValid) {
                    if (confirm('Are you sure you want to submit your application? You will not be able to edit it afterwards.')) {
                        this.submitForm();
                    }
                }
            }
            
            showErrorSummary() {
                const errorContainer = document.getElementById('error-container');
                const errorList = document.getElementById('error-list');
                
                errorList.innerHTML = '';
                Object.values(this.errors).forEach(error => {
                    const li = document.createElement('li');
                    li.textContent = `• ${error}`;
                    errorList.appendChild(li);
                });
                
                if (Object.keys(this.errors).length > 0) {
                    errorContainer.classList.remove('hidden');
                    errorContainer.scrollIntoView({ behavior: 'smooth' });
                } else {
                    errorContainer.classList.add('hidden');
                }
            }
            
            submitForm() {
                document.getElementById('loading-overlay').classList.remove('hidden');
                document.getElementById('submit-btn').disabled = true;
                document.getElementById('cgmp-form').submit();
            }
        }
        
        // Initialize form when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ProfessionalCGMPForm();
        });
    </script>
</body>
</html>
{% load static %}
<!doctype html>
<html lang="en" class="h-100">

<head>
    <!-- Required Meta Tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>{% block title %}ACRP | Association of Christian Religious Practitioners{% endblock title %}</title>
    <meta name="title" content="{% block meta_title %}ACRP | Association of Christian Religious Practitioners{% endblock meta_title %}">
    <meta name="description" content="{% block meta_description %}ACRP Africa Management System streamlines manual processes and simplifies affiliation management by integrating key features such as course delivery, CPD tracking, and payment processing for ministry professionals and affiliates.{% endblock meta_description %}">
    <meta name="keywords" content="{% block meta_keywords %}ACRP, Pastoral Training, Ministry Professionals, CPD, Learner Management, Course Management, Payment Processing, Ministry Development, Africa, Christian Religious Practitioners{% endblock meta_keywords %}">
    <meta name="author" content="ACRP Africa Team">
    <meta name="robots" content="{% block meta_robots %}index, follow{% endblock meta_robots %}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% block og_url %}https://acrpafrica.co.za/{% endblock og_url %}">
    <meta property="og:title" content="{% block og_title %}ACRP Management System | Empowering Ministry Training{% endblock og_title %}">
    <meta property="og:description" content="{% block og_description %}ACRP Africa Management System streamlines manual processes and simplifies affiliation management by integrating key features such as course delivery, CPD tracking, and payment processing.{% endblock og_description %}">
    <meta property="og:image" content="{% block og_image %}{% static 'main_media/logo.png' %}{% endblock og_image %}">
    <meta property="og:locale" content="en_ZA">
    <meta property="og:site_name" content="ACRP Africa">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{% block twitter_url %}https://acrpafrica.co.za/{% endblock twitter_url %}">
    <meta property="twitter:title" content="{% block twitter_title %}ACRP Management System | Empowering Ministry Training{% endblock twitter_title %}">
    <meta property="twitter:description" content="{% block twitter_description %}ACRP Africa Management System streamlines manual processes and simplifies affiliation management.{% endblock twitter_description %}">
    <meta property="twitter:image" content="{% block twitter_image %}{% static 'main_media/logo.png' %}{% endblock twitter_image %}">
    
    <!-- Favicon and Touch Icons -->
    <link rel="shortcut icon" href="{% static 'main_media/logo-white-footer.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'main_media/logo.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'main_media/logo.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'main_media/logo.png' %}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{% block canonical_url %}https://acrpafrica.co.za/{% endblock canonical_url %}">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Font Awesome (fallback) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous">
    
    <!-- Additional CSS -->
    {% block extra_css %}{% endblock extra_css %}
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        acrp: {
                            primary: '#2c3e50',
                            secondary: '#3498db',
                            success: '#27ae60',
                            warning: '#f39c12',
                            danger: '#e74c3c',
                            dark: '#34495e',
                            light: '#ecf0f1',
                        },
                        sidebar: '#1f2937',
                        'sidebar-hover': '#374151'
                    }
                }
            }
        }
    </script>
    
    <!-- Custom Styles -->
    <style>
        .sidebar-link:hover {
            background-color: #374151;
        }
        
        .sidebar-link.active {
            background-color: #3b82f6;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
        }
        
        /* Custom scrollbar for sidebar */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 3px;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        
        /* Loading animation */
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "ACRP Africa Management System",
        "operatingSystem": "Web-based",
        "applicationCategory": "BusinessApplication",
        "description": "ACRP Africa Management System streamlines manual processes and simplifies affiliation management by integrating key features such as course delivery, CPD tracking, and payment processing for ministry professionals and affiliates.",
        "url": "https://acrpafrica.co.za/",
        "author": {
            "@type": "Organization",
            "name": "ACRP Africa Team",
            "url": "https://acrpafrica.co.za/"
        },
        "provider": {
            "@type": "Organization",
            "name": "Association of Christian Religious Practitioners"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "150"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "ZAR"
        }
    }
    </script>
    
    {% block structured_data %}{% endblock structured_data %}
</head>

<body class="bg-gray-50">
    <!-- User Role Detection -->
    {% if user.is_authenticated %}
        {% with user.acrp_role as user_role %}
        {% endwith %}
    {% endif %}
    
    <!-- Skip to Content (Accessibility) -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 z-50 bg-blue-600 text-white px-4 py-2 rounded">Skip to main content</a>
    
    <!-- Top Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-200 fixed w-full z-30 top-0">
        <div class="px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <!-- Mobile menu button -->
                    <button type="button" class="md:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100" onclick="toggleSidebar()">
                        <i class="bi bi-list text-xl"></i>
                    </button>
                    
                    <!-- Logo -->
                    <div class="flex-shrink-0 flex items-center ml-4 md:ml-0">
                        <img src="{% static 'main_media/logo-white.png' %}" 
                             class="h-8 w-auto" 
                             alt="ACRP Logo">
                        <h1 class="ml-2 text-xl font-semibold text-gray-900 hidden sm:block">ACRP Dashboard</h1>
                    </div>
                    
                    <!-- Breadcrumb -->
                    <div class="hidden md:ml-6 md:flex md:items-center md:space-x-4">
                        <span class="text-gray-500">/</span>
                        <span class="text-sm text-gray-500">
                            {% block breadcrumb_text %}
                                {% if 'event' in request.resolver_match.url_name %}
                                    Event Management
                                {% elif 'announcement' in request.resolver_match.url_name %}
                                    Announcement Management
                                {% elif 'project' in request.resolver_match.url_name %}
                                    Project Management
                                {% elif 'task' in request.resolver_match.url_name %}
                                    Task Management
                                {% else %}
                                    {% block page_title %}Dashboard{% endblock page_title %}
                                {% endif %}
                            {% endblock breadcrumb_text %}
                        </span>
                    </div>
                </div>
                
                <!-- Right side -->
                <div class="flex items-center space-x-4">
                    <!-- Search -->
                    <div class="relative hidden md:block">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="bi bi-search text-gray-400"></i>
                        </div>
                        <input type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Search...">
                    </div>
                    
                    <!-- Mobile search button -->
                    <button class="md:hidden p-2 text-gray-400 hover:text-gray-500">
                        <i class="bi bi-search text-xl"></i>
                    </button>
                    
                    <!-- Notifications -->
                    <div class="relative">
                        <button class="p-2 text-gray-400 hover:text-gray-500 relative" onclick="toggleDropdown('notifications')">
                            <i class="bi bi-bell text-xl"></i>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400"></span>
                        </button>
                        <div class="hidden absolute right-0 z-10 mt-2 w-80 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5" id="notifications-dropdown">
                            <div class="py-1">
                                <div class="px-4 py-2 text-sm text-gray-700 border-b border-gray-200">
                                    <strong>Notifications</strong>
                                </div>
                                <div class="px-4 py-2 text-sm text-gray-500">
                                    No new notifications
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- User menu -->
                    <div class="relative">
                        <button class="flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" onclick="toggleDropdown('user-menu')">
                            <img class="h-8 w-8 rounded-full" src="https://ui-avatars.com/api/?name={{ user.first_name|default:'Admin' }}+{{ user.last_name|default:'User' }}&background=3b82f6&color=fff" alt="User">
                            <span class="ml-2 text-gray-700 hidden sm:block">{{ user.first_name|default:"User" }} {{ user.last_name|default:"" }}</span>
                            <i class="bi bi-chevron-down ml-1 text-gray-400"></i>
                        </button>
                        <div class="hidden absolute right-0 z-10 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5" id="user-menu-dropdown">
                            <div class="py-1">
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="bi bi-person mr-2"></i>My Profile
                                </a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="bi bi-gear mr-2"></i>Account Settings
                                </a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i class="bi bi-shield-check mr-2"></i>Privacy Settings
                                </a>
                                <div class="border-t border-gray-100"></div>
                                <form method="POST" action="{% url 'accounts:logout' %}" class="block">
                                    {% csrf_token %}
                                    <button type="submit" class="w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50">
                                        <i class="bi bi-box-arrow-right mr-2"></i>Sign Out
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar fixed inset-y-0 left-0 z-20 w-64 bg-gray-800 pt-16 pb-4 overflow-y-auto">
        <nav class="mt-5 px-2">
            <div class="space-y-1">
                
                <!-- LEARNER SIDEBAR (Only for users with LEARNER role) -->
                {% if user.is_authenticated and user.acrp_role == 'LEARNER' %}
                    
                    <!-- Main Menu Section -->
                    <div class="px-3 py-2">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Student Portal</h3>
                    </div>
                    
                    <!-- Dashboard -->
                    <a href="{% url 'common:dashboard' %}" class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active text-white{% else %}text-gray-300 hover:text-white{% endif %} group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-speedometer2 mr-3 text-lg"></i>
                        My Dashboard
                    </a>
                    
                    <!-- My Profile -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-person mr-3 text-lg"></i>
                        My Profile
                    </a>
                    
                    <!-- Learning Section -->
                    <div class="px-3 py-2 mt-6">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Learning</h3>
                    </div>
                    
                    <!-- My Courses -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-book mr-3 text-lg"></i>
                        My Courses
                        <span class="ml-auto inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">3</span>
                    </a>
                    
                    <!-- Assignments -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-file-text mr-3 text-lg"></i>
                        Assignments
                        <span class="ml-auto inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">2</span>
                    </a>
                    
                    <!-- Grades -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-bar-chart mr-3 text-lg"></i>
                        My Grades
                    </a>
                    
                    <!-- CPD Tracking -->
                    <a href="{% url 'cpd:dashboard' %}" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-award mr-3 text-lg"></i>
                        CPD Tracking
                    </a>
                    
                    <!-- Resources Section -->
                    <div class="px-3 py-2 mt-6">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Resources</h3>
                    </div>
                    
                    <!-- Digital Card -->
                    <a href="{% url 'affiliationcard:dashboard' %}" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-credit-card mr-3 text-lg"></i>
                        My Digital Card
                    </a>
                    
                    <!-- Library -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-collection mr-3 text-lg"></i>
                        Resource Library
                    </a>
                    
                    <!-- Events -->
                    <a href="{% url 'common:event_list' %}" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-calendar-event mr-3 text-lg"></i>
                        Events & Workshops
                    </a>
                    
                    <!-- Announcements -->
                    <a href="{% url 'common:announcement_list' %}" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-megaphone mr-3 text-lg"></i>
                        Announcements
                    </a>
                    
                    <!-- Bottom Links -->
                    <div class="mt-8 pt-8 border-t border-gray-700">
                        <div class="space-y-1">
                            <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                                <i class="bi bi-question-circle mr-3 text-lg"></i>
                                Help & Support
                            </a>
                        </div>
                    </div>
                
                {% else %}
                    <!-- ADMIN/STAFF SIDEBAR (For all other roles) -->
                    
                    <!-- Main Menu Section -->
                    <div class="px-3 py-2">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Main Menu</h3>
                    </div>
                    
                    <!-- Dashboard -->
                    <a href="{% url 'common:dashboard' %}" class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active text-white{% else %}text-gray-300 hover:text-white{% endif %} group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-speedometer2 mr-3 text-lg"></i>
                        Dashboard
                        <span class="ml-auto inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">6</span>
                    </a>
                    
                    <!-- My Profile -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-person mr-3 text-lg"></i>
                        My Profile
                    </a>
                    
                    <!-- Quick Actions -->
                    <div class="px-3 py-2 mt-6">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Quick Actions</h3>
                    </div>
                    
                    <div class="px-3 py-2">
                        <div class="space-y-2">
                            <a href="{% url 'enrollments:onboarding_start' %}" class="w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-3 rounded-md flex items-center">
                                <i class="bi bi-plus mr-2"></i>New Enrollment
                            </a>
                            <a href="{% url 'cpd:dashboard' %}"  class="w-full bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-3 rounded-md flex items-center">
                                <i class="bi bi-graph-up mr-2"></i>CPD Dashboard
                            </a>
                            <a type="button" class="w-full bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium py-2 px-3 rounded-md flex items-center" onclick="showToast('Generate Report feature coming soon!', 'info')">
                                <i class="bi bi-mortarboard mr-2"></i>Learn
                            </a>
                            <a href="{% url 'affiliationcard:dashboard' %}" type="button" class="w-full bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-medium py-2 px-3 rounded-md flex items-center">
                                <i class="bi bi-credit-card mr-2"></i>Digital Card
                            </a>
                        </div>
                        
                        <!-- Quick Create Dropdown -->
                        <div class="mt-3">
                            <div class="relative">
                                <button type="button" class="w-full bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium py-2 px-3 rounded-md flex items-center justify-between" onclick="toggleDropdown('quick-create')">
                                    <span><i class="bi bi-plus-circle mr-2"></i>Quick Create</span>
                                    <i class="bi bi-chevron-down"></i>
                                </button>
                                <div class="hidden absolute bottom-full left-0 w-full mb-2 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50" id="quick-create-dropdown">
                                    <div class="py-1">
                                        <a href="{% url 'common:create_event' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                            <i class="bi bi-calendar-plus mr-2"></i>New Event
                                        </a>
                                        <a href="{% url 'common:create_announcement' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                            <i class="bi bi-megaphone mr-2"></i>New Announcement
                                        </a>
                                        <a href="{% url 'common:create_project' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                            <i class="bi bi-folder-plus mr-2"></i>New Project
                                        </a>
                                        <a href="{% url 'common:create_task' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                            <i class="bi bi-check-square mr-2"></i>New Task
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Activities Section -->
                    <div class="px-3 py-2 mt-6">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Activities</h3>
                    </div>
                    
                    <!-- Events with submenu -->
                    <div class="space-y-1">
                        <button class="sidebar-link {% if 'event' in request.resolver_match.url_name %}text-white{% else %}text-gray-300 hover:text-white{% endif %} group w-full flex items-center px-3 py-2 text-sm font-medium rounded-md" onclick="toggleSubmenu('events')">
                            <i class="bi bi-calendar-event mr-3 text-lg"></i>
                            Events
                            <span class="ml-auto mr-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">2</span>
                            <i class="bi bi-chevron-down transition-transform duration-200" id="events-icon"></i>
                        </button>
                        <div class="hidden ml-6 space-y-1" id="events-submenu">
                            <a href="{% url 'common:event_list' %}" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">All Events</a>
                            <a href="{% url 'common:create_event' %}" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">Create Event</a>
                        </div>
                    </div>
                    
                    <!-- Announcements with submenu -->
                    <div class="space-y-1">
                        <button class="sidebar-link {% if 'announcement' in request.resolver_match.url_name %}text-white{% else %}text-gray-300 hover:text-white{% endif %} group w-full flex items-center px-3 py-2 text-sm font-medium rounded-md" onclick="toggleSubmenu('announcements')">
                            <i class="bi bi-megaphone mr-3 text-lg"></i>
                            Announcements
                            <span class="ml-auto mr-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">1</span>
                            <i class="bi bi-chevron-down transition-transform duration-200" id="announcements-icon"></i>
                        </button>
                        <div class="hidden ml-6 space-y-1" id="announcements-submenu">
                            <a href="{% url 'common:announcement_list' %}" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">All Announcements</a>
                            <a href="{% url 'common:create_announcement' %}" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">Create Announcement</a>
                        </div>
                    </div>
                    
                    <!-- Workspace -->
                    <a href="{% url 'common:workspace_dashboard' %}" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-kanban mr-3 text-lg"></i>
                        Workspace
                    </a>
                    
                    <!-- Education Section -->
                    <div class="px-3 py-2 mt-6">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Education</h3>
                    </div>
                    
                    <!-- Enrollments with submenu -->
                    <div class="space-y-1">
                        <button class="sidebar-link text-gray-300 hover:text-white group w-full flex items-center px-3 py-2 text-sm font-medium rounded-md" onclick="toggleSubmenu('enrollments')">
                            <i class="bi bi-people mr-3 text-lg"></i>
                            Enrollments
                            <i class="bi bi-chevron-down ml-auto transition-transform duration-200" id="enrollments-icon"></i>
                        </button>
                        <div class="hidden ml-6 space-y-1" id="enrollments-submenu">
                            <a href="{% url 'enrollments:enrollment_dashboard' %}" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">Enrollment Dashboard</a>
                            <a href="javascript:void(0)" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">Pending Review</a>
                            <a href="javascript:void(0)" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">Approved</a>
                            <a href="javascript:void(0)" class="text-gray-400 hover:text-white block px-3 py-2 text-sm rounded-md">Rejected</a>
                        </div>
                    </div>
                    
                    <!-- Students -->
                    <a href="{% url 'enrollments:enrollment_dashboard' %}" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-mortarboard mr-3 text-lg"></i>
                        Enrollment Dashboard
                    </a>
                    
                    <!-- CPD Tracking -->
                    <a href="{% url 'cpd:dashboard' %}" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-award mr-3 text-lg"></i>
                        CPD Dashboard
                    </a>
                    
                    <!-- Administration Section -->
                    <div class="px-3 py-2 mt-6">
                        <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Administration</h3>
                    </div>
                    
                    <!-- Reports -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-bar-chart mr-3 text-lg"></i>
                        Reports
                    </a>
                    
                    <!-- Settings -->
                    <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                        <i class="bi bi-gear mr-3 text-lg"></i>
                        Provider Settings
                    </a>
                    
                    <!-- Bottom Links -->
                    <div class="mt-8 pt-8 border-t border-gray-700">
                        <div class="space-y-1">
                            <a href="javascript:void(0)" class="sidebar-link text-gray-300 hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                                <i class="bi bi-question-circle mr-3 text-lg"></i>
                                Help & Support
                            </a>
                        </div>
                    </div>
                {% endif %}
                
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="md:pl-64 flex flex-col flex-1">
        <main class="flex-1 pt-16" id="main-content">
            <div class="py-6">
                <div class="max-w-10xl mx-auto px-4 sm:px-6 lg:px-10">
                    
                    
                    
                    <!-- Alert Messages -->
                    {% if messages %}
                    <div class="mb-6">
                        {% for message in messages %}
                        <div class="rounded-md p-4 mb-4 {% if message.tags == 'error' or message.tags == 'danger' %}bg-red-50 border border-red-200{% elif message.tags == 'warning' %}bg-yellow-50 border border-yellow-200{% elif message.tags == 'success' %}bg-green-50 border border-green-200{% else %}bg-blue-50 border border-blue-200{% endif %}">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    {% if message.tags == 'error' or message.tags == 'danger' %}
                                        <i class="bi bi-exclamation-circle text-red-400"></i>
                                    {% elif message.tags == 'warning' %}
                                        <i class="bi bi-exclamation-triangle text-yellow-400"></i>
                                    {% elif message.tags == 'success' %}
                                        <i class="bi bi-check-circle text-green-400"></i>
                                    {% else %}
                                        <i class="bi bi-info-circle text-blue-400"></i>
                                    {% endif %}
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm {% if message.tags == 'error' or message.tags == 'danger' %}text-red-800{% elif message.tags == 'warning' %}text-yellow-800{% elif message.tags == 'success' %}text-green-800{% else %}text-blue-800{% endif %}">
                                        {{ message }}
                                    </p>
                                </div>
                                <div class="ml-auto pl-3">
                                    <button class="inline-flex {% if message.tags == 'error' or message.tags == 'danger' %}text-red-400 hover:text-red-600{% elif message.tags == 'warning' %}text-yellow-400 hover:text-yellow-600{% elif message.tags == 'success' %}text-green-400 hover:text-green-600{% else %}text-blue-400 hover:text-blue-600{% endif %}" onclick="this.parentElement.parentElement.parentElement.remove()">
                                        <i class="bi bi-x text-lg"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <!-- Page Content -->
                    {% block content %}
                    <!-- Default dashboard content -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-4 py-5 sm:p-6">
                            <div class="text-center">
                                <i class="bi bi-house-door text-gray-400 text-6xl mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-900 mb-2">Welcome to ACRP</h3>
                                <p class="text-sm text-gray-500 mb-6">
                                    Welcome to the Association of Christian Religious Practitioners management system.
                                </p>
                                <div class="space-x-4">
                                    <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700">
                                        <i class="bi bi-plus mr-2"></i>
                                        Get Started
                                    </button>
                                    <button class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                        <i class="bi bi-book mr-2"></i>
                                        Documentation
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endblock content %}
                    
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="bg-white border-t border-gray-200">
            <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center">
                    <div class="flex space-x-6">
                        <a href="javascript:void(0)" class="text-gray-500 hover:text-gray-900 text-sm">Privacy Policy</a>
                        <a href="javascript:void(0)" class="text-gray-500 hover:text-gray-900 text-sm">Terms of Service</a>
                        <a href="javascript:void(0)" class="text-gray-500 hover:text-gray-900 text-sm">Support</a>
                    </div>
                    <div class="text-sm text-gray-500">
                        Copyright © <span id="currentYear"></span> 
                        <a href="https://acrpafrica.co.za/" class="text-gray-700 hover:text-gray-900">ACRP Africa</a>. 
                        All rights reserved.
                    </div>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Additional JavaScript -->
    {% block extra_js %}{% endblock extra_js %}
    
    <!-- Core JavaScript -->
    <script>
        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('open');
        }
        
        // Toggle submenu
        function toggleSubmenu(menuId) {
            const submenu = document.getElementById(menuId + '-submenu');
            const icon = document.getElementById(menuId + '-icon');
            
            submenu.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        }
        
        // Toggle dropdown
        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId + '-dropdown');
            
            // Close other dropdowns
            document.querySelectorAll('[id$="-dropdown"]').forEach(d => {
                if (d !== dropdown) d.classList.add('hidden');
            });
            
            dropdown.classList.toggle('hidden');
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.relative')) {
                document.querySelectorAll('[id$="-dropdown"]').forEach(dropdown => {
                    dropdown.classList.add('hidden');
                });
            }
        });
        
        // Utility function for showing toast notifications
        function showToast(message, type = 'info') {
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-transform duration-300`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => toast.style.transform = 'translateX(0)', 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        // CSRF token helper for AJAX requests
        function getCSRFToken() {
            return document.querySelector('[name=csrfmiddlewaretoken]')?.value || '';
        }
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.querySelector('.sidebar');
            const menuButton = document.querySelector('button[onclick="toggleSidebar()"]');
            
            if (window.innerWidth < 768 && sidebar.classList.contains('open')) {
                if (!sidebar.contains(event.target) && !menuButton?.contains(event.target)) {
                    sidebar.classList.remove('open');
                }
            }
        });
        
    </script>
    
    {% block inline_js %}{% endblock inline_js %}
    
</body>
</html>
{% load static %}
<!doctype html>
<html lang="en" class="h-100">

<head>
    <!-- Required Meta Tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>{% block title %}ACRP | Association of Christian Religious Practitioners{% endblock title %}</title>
    <meta name="title" content="{% block meta_title %}ACRP | Association of Christian Religious Practitioners{% endblock meta_title %}">
    <meta name="description" content="{% block meta_description %}ACRP Africa Management System streamlines manual processes and simplifies affiliation management by integrating key features such as course delivery, CPD tracking, and payment processing for ministry professionals and affiliates.{% endblock meta_description %}">
    <meta name="keywords" content="{% block meta_keywords %}ACRP, Pastoral Training, Ministry Professionals, CPD, Learner Management, Course Management, Payment Processing, Ministry Development, Africa, Christian Religious Practitioners{% endblock meta_keywords %}">
    <meta name="author" content="ACRP Africa Team">
    <meta name="robots" content="{% block meta_robots %}index, follow{% endblock meta_robots %}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% block og_url %}https://acrpafrica.co.za/{% endblock og_url %}">
    <meta property="og:title" content="{% block og_title %}ACRP Management System | Empowering Ministry Training{% endblock og_title %}">
    <meta property="og:description" content="{% block og_description %}ACRP Africa Management System streamlines manual processes and simplifies affiliation management by integrating key features such as course delivery, CPD tracking, and payment processing.{% endblock og_description %}">
    <meta property="og:image" content="{% block og_image %}{% static 'main_media/logo.png' %}{% endblock og_image %}">
    <meta property="og:locale" content="en_ZA">
    <meta property="og:site_name" content="ACRP Africa">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{% block twitter_url %}https://acrpafrica.co.za/{% endblock twitter_url %}">
    <meta property="twitter:title" content="{% block twitter_title %}ACRP Management System | Empowering Ministry Training{% endblock twitter_title %}">
    <meta property="twitter:description" content="{% block twitter_description %}ACRP Africa Management System streamlines manual processes and simplifies affiliation management.{% endblock twitter_description %}">
    <meta property="twitter:image" content="{% block twitter_image %}{% static 'main_media/logo.png' %}{% endblock twitter_image %}">
    
    <!-- Favicon and Touch Icons -->
    <link rel="shortcut icon" href="{% static 'main_media/logo-white-footer.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'main_media/logo.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'main_media/logo.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'main_media/logo.png' %}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{% block canonical_url %}https://acrpafrica.co.za/{% endblock canonical_url %}">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Font Awesome (fallback) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous">
    
    <!-- Additional CSS -->
    {% block extra_css %}{% endblock extra_css %}
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        acrp: {
                            primary: '#2c3e50',
                            secondary: '#3498db',
                            success: '#27ae60',
                            warning: '#f39c12',
                            danger: '#e74c3c',
                            dark: '#34495e',
                            light: '#ecf0f1',
                        },
                        sidebar: '#1f2937',
                        'sidebar-hover': '#374151'
                    }
                }
            }
        }
    </script>
    
    <!-- Custom Styles -->
    <style>
        .sidebar-link:hover {
            background-color: #374151;
        }
        
        .sidebar-link.active {
            background-color: #3b82f6;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
        }
        
        /* Custom scrollbar for sidebar */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 3px;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        
        /* Loading animation */
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "ACRP Africa Management System",
        "operatingSystem": "Web-based",
        "applicationCategory": "BusinessApplication",
        "description": "ACRP Africa Management System streamlines manual processes and simplifies affiliation management by integrating key features such as course delivery, CPD tracking, and payment processing for ministry professionals and affiliates.",
        "url": "https://acrpafrica.co.za/",
        "author": {
            "@type": "Organization",
            "name": "ACRP Africa Team",
            "url": "https://acrpafrica.co.za/"
        },
        "provider": {
            "@type": "Organization",
            "name": "Association of Christian Religious Practitioners"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "150"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "ZAR"
        }
    }
    </script>
    
    {% block structured_data %}{% endblock structured_data %}
</head>

<body class="bg-gray-50">
    
    <!-- Skip to Content (Accessibility) -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 z-50 bg-blue-600 text-white px-4 py-2 rounded">Skip to main content</a>
    
    <div class="container py-4">
      {% block content %}{% endblock %}
    </div>
    
    
    <!-- Additional JavaScript -->
    {% block extra_js %}{% endblock extra_js %}
    
    <!-- Core JavaScript -->
    <script>
        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('open');
        }
        
        // Toggle submenu
        function toggleSubmenu(menuId) {
            const submenu = document.getElementById(menuId + '-submenu');
            const icon = document.getElementById(menuId + '-icon');
            
            submenu.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        }
        
        // Toggle dropdown
        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId + '-dropdown');
            
            // Close other dropdowns
            document.querySelectorAll('[id$="-dropdown"]').forEach(d => {
                if (d !== dropdown) d.classList.add('hidden');
            });
            
            dropdown.classList.toggle('hidden');
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.relative')) {
                document.querySelectorAll('[id$="-dropdown"]').forEach(dropdown => {
                    dropdown.classList.add('hidden');
                });
            }
        });
        
        // Utility function for showing toast notifications
        function showToast(message, type = 'info') {
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-transform duration-300`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => toast.style.transform = 'translateX(0)', 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        // CSRF token helper for AJAX requests
        function getCSRFToken() {
            return document.querySelector('[name=csrfmiddlewaretoken]')?.value || '';
        }
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.querySelector('.sidebar');
            const menuButton = document.querySelector('button[onclick="toggleSidebar()"]');
            
            if (window.innerWidth < 768 && sidebar.classList.contains('open')) {
                if (!sidebar.contains(event.target) && !menuButton?.contains(event.target)) {
                    sidebar.classList.remove('open');
                }
            }
        });
        
    </script>
    
    {% block inline_js %}{% endblock inline_js %}
    
</body>
</html>
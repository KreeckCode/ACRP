{% extends "affiliationcard/emails/email_base.html" %}

{% block title %}ACRP Card Renewal Reminder - {{ card.card_number }}{% endblock %}

{% block content %}
    <div class="alert alert-warning">
        <h3 style="margin-top: 0; color: #92400e;">‚è∞ Your ACRP Card Needs Renewal</h3>
        <p style="margin-bottom: 0;">Your digital affiliation card will expire soon. Don't let your membership lapse!</p>
    </div>

    <!-- Expiration Timeline -->
    <div style="background: linear-gradient(45deg, #fef3c7, #fed7aa); padding: 25px; border-radius: 12px; margin: 20px 0; text-align: center;">
        <h4 style="margin-top: 0; color: #92400e;">Card Expires In</h4>
        {% if card.days_until_expiry <= 7 %}
            <div style="font-size: 36px; font-weight: bold; color: #dc2626; margin: 10px 0;">
                {{ card.days_until_expiry }} Day{{ card.days_until_expiry|pluralize }}
            </div>
            <p style="margin-bottom: 0; color: #991b1b; font-weight: 600;">‚ö†Ô∏è URGENT - Expires Very Soon!</p>
        {% elif card.days_until_expiry <= 30 %}
            <div style="font-size: 36px; font-weight: bold; color: #f59e0b; margin: 10px 0;">
                {{ card.days_until_expiry }} Day{{ card.days_until_expiry|pluralize }}
            </div>
            <p style="margin-bottom: 0; color: #92400e;">Please renew soon to avoid interruption</p>
        {% else %}
            <div style="font-size: 36px; font-weight: bold; color: #059669; margin: 10px 0;">
                {{ card.days_until_expiry }} Day{{ card.days_until_expiry|pluralize }}
            </div>
            <p style="margin-bottom: 0; color: #065f46;">Advance renewal notice</p>
        {% endif %}
        
        <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 6px;">
            <strong>Expiration Date: {{ card.date_expires|date:"F j, Y" }}</strong>
        </div>
    </div>

    <!-- Card Details -->
    <div class="card-preview">
        <h4 style="margin-top: 0; color: #1f2937;">Current Card Details</h4>
        <div class="card-number">{{ card.card_number }}</div>
        
        <div style="text-align: left; max-width: 300px; margin: 20px auto;">
            <p style="margin: 5px 0;"><strong>Name:</strong> {{ card.get_display_name }}</p>
            <p style="margin: 5px 0;"><strong>Council:</strong> {{ card.council_name }}</p>
            <p style="margin: 5px 0;"><strong>Affiliation:</strong> {{ card.affiliation_type|title }}</p>
            <p style="margin: 5px 0;"><strong>Issued:</strong> {{ card.date_issued|date:"F j, Y" }}</p>
            <p style="margin: 5px 0;"><strong>Current Status:</strong> 
                <span class="status-badge status-{{ card.status }}">{{ card.get_status_display }}</span>
            </p>
        </div>
    </div>

    <h3 style="color: #1f2937;">üîÑ How to Renew</h3>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
        <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6;">
            <h4 style="margin-top: 0; color: #1e40af;">1Ô∏è‚É£ Contact Your Council</h4>
            <p style="margin-bottom: 0; color: #1e40af;">Reach out to your council administrator to initiate the renewal process.</p>
        </div>
        
        <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; border-left: 4px solid #10b981;">
            <h4 style="margin-top: 0; color: #065f46;">2Ô∏è‚É£ Complete Requirements</h4>
            <p style="margin-bottom: 0; color: #065f46;">Submit any required documentation and complete renewal requirements.</p>
        </div>
        
        <div style="background: #fef3c7; padding: 20px; border-radius: 8px; border-left: 4px solid #f59e0b;">
            <h4 style="margin-top: 0; color: #92400e;">3Ô∏è‚É£ Payment</h4>
            <p style="margin-bottom: 0; color: #92400e;">Complete payment of any applicable renewal fees.</p>
        </div>
        
        <div style="background: #f3e8ff; padding: 20px; border-radius: 8px; border-left: 4px solid #8b5cf6;">
            <h4 style="margin-top: 0; color: #6b21a8;">4Ô∏è‚É£ New Card Issued</h4>
            <p style="margin-bottom: 0; color: #6b21a8;">Once approved, you'll receive your renewed digital card via email.</p>
        </div>
    </div>

    <!-- Council Contact Information -->
    <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid #e2e8f0;">
        <h4 style="margin-top: 0; color: #1f2937;">üìû Your Council Contact</h4>
        <div style="background: white; padding: 15px; border-radius: 6px; border-left: 4px solid #3b82f6;">
            <p style="margin: 5px 0;"><strong>Council:</strong> {{ card.council_name }}</p>
            <p style="margin: 5px 0;"><strong>Council Code:</strong> {{ card.council_code }}</p>
            <p style="margin: 5px 0;"><strong>Contact:</strong> council-{{ card.council_code|lower }}@acrp.org</p>
            <p style="margin: 0;"><strong>Phone:</strong> (555) 123-4567 ext. {{ card.council_code|slice:"-3:" }}</p>
        </div>
    </div>

    <!-- Important Notices -->
    <h3 style="color: #1f2937;">üìã Important Information</h3>

    <div style="background: #fef2f2; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ef4444;">
        <h4 style="margin-top: 0; color: #991b1b;">‚ö†Ô∏è What Happens If You Don't Renew</h4>
        <ul style="color: #7f1d1d; margin-bottom: 0;">
            <li>Your card will become invalid and cannot be used for verification</li>
            <li>Your affiliation status will show as expired</li>
            <li>You may lose access to member benefits and services</li>
            <li>Reactivation may require additional steps and fees</li>
        </ul>
    </div>

    <div style="background: #ecfdf5; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981;">
        <h4 style="margin-top: 0; color: #065f46;">‚úÖ Benefits of Timely Renewal</h4>
        <ul style="color: #064e3b; margin-bottom: 0;">
            <li>Uninterrupted access to all member services</li>
            <li>Continuous verification capability</li>
            <li>Avoid potential late fees or reactivation costs</li>
            <li>Maintain your standing within the ACRP community</li>
        </ul>
    </div>

    <!-- Action Buttons -->
    <div style="text-align: center; margin: 30px 0;">
        <a href="#" class="btn btn-primary" style="color: white; text-decoration: none; margin: 5px;">
            üîÑ Start Renewal Process
        </a>
        <a href="{{ verification_url }}" class="btn btn-secondary" style="color: #3b82f6; text-decoration: none; margin: 5px;">
            üëÄ View Current Card
        </a>
    </div>

    <div class="alert alert-info">
        <strong>Questions About Renewal?</strong> Contact our support team at support@acrp.org or (555) 123-4567. Reference your card number: <strong>{{ card.card_number }}</strong>
    </div>
{% endblock %}
{% extends "base/base.html" %}
{% load static %}
{% block title %}Handle Leave Request{% endblock %}

{% block content %}
<div class="container py-4">
  <!-- Heading -->
  <h1 class="h4 mb-4">Handle Leave Request</h1>

  <!-- Request Details Card -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h5 class="card-title">
        {{ leave_request.employee.user.first_name }}
        {{ leave_request.employee.user.last_name }}
      </h5>
      <p class="card-text mb-1">
        <strong>Leave Type:</strong> {{ leave_request.leave_type.name }}
      </p>
      <p class="card-text mb-1">
        <strong>Dates:</strong>
        {{ leave_request.start_date }} to {{ leave_request.end_date }}
      </p>
      <p class="card-text mb-1">
        <strong>Status:</strong> {{ leave_request.get_status_display }}
      </p>
      <p class="card-text mb-2">
        <strong>Reason:</strong> {{ leave_request.reason }}
      </p>

      <!-- If you want to show more details, e.g. total_days or date_requested, add them here -->
      <p class="card-text mb-0">
        <strong>Date Requested:</strong> {{ leave_request.date_requested }}
      </p>
    </div>
  </div>

  <!-- Approve/Decline Form with HR Comment -->
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <form method="POST">
        {% csrf_token %}
        <div class="mb-3">
          <label for="hrComment" class="form-label"><strong>HR Comment</strong></label>
          <textarea
            name="hr_comment"
            id="hrComment"
            class="form-control"
            rows="3"
            placeholder="Add any notes or reasons for approval/decline..."
          ></textarea>
        </div>
        <div class="d-flex gap-2">
          <button
            type="submit"
            name="approve"
            class="btn btn-success"
          >
            <i class="bi bi-check-circle"></i> Approve
          </button>
          <button
            type="submit"
            name="decline"
            class="btn btn-danger"
          >
            <i class="bi bi-x-circle"></i> Decline
          </button>
          <a href="{% url 'leave_request_list' %}" class="btn btn-secondary">
            Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

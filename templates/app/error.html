<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Error {{ error_code|default:"Error" }} — {{ error_message|default:"Something went wrong" }}</title>
  <meta name="robots" content="noindex,nofollow">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html,body { height:100%; }
    body { -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    pre { white-space: pre-wrap; word-wrap: break-word; }
  </style>
</head>
<body class="min-h-screen bg-gray-50 flex items-center justify-center">
  <main class="w-full max-w-4xl mx-4">
    <section class="bg-white shadow-lg rounded-lg overflow-hidden">
      <div class="sm:flex">
        <aside class="sm:w-1/3 p-8 flex items-center justify-center bg-gradient-to-b from-gray-50 to-white">
          {% comment %} Icon per error code {% endcomment %}
          {% if error_code == '404' %}
            <svg class="w-36 h-36 text-gray-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <circle cx="10" cy="10" r="6" stroke="currentColor" stroke-width="1.5" fill="none" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-4.35-4.35" />
            </svg>
          {% elif error_code == '500' %}
            <svg class="w-36 h-36 text-red-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l2 2" />
            </svg>
          {% elif error_code == '403' %}
            <svg class="w-36 h-36 text-yellow-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <rect x="6" y="11" width="12" height="9" rx="2" stroke="currentColor" stroke-width="1.5" fill="none" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 11c1.657 0 3-1.567 3-3.5S13.657 4 12 4s-3 1.567-3 3.5S10.343 11 12 11z" />
            </svg>
          {% else %}
            <svg class="w-36 h-36 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01" />
            </svg>
          {% endif %}
        </aside>

        <div class="p-8 sm:w-2/3">
          <div class="flex items-start justify-between">
            <div>
              <h1 class="text-3xl font-extrabold text-gray-900">Error {{ error_code|default:"—" }}</h1>
              <p class="mt-2 text-lg text-gray-600">{{ error_message|default:"An unexpected error occurred." }}</p>

              <div class="mt-6">
                <div class="flex flex-wrap gap-3">
                  {% if suggestions %}
                    {% for label, url in suggestions %}
                      <a href="{{ url }}" class="inline-flex items-center px-4 py-2 rounded-md text-sm font-medium border border-gray-200 bg-white hover:bg-gray-50 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">{{ label }}</a>
                    {% endfor %}
                  {% else %}
                    <a href="/" class="inline-flex items-center px-4 py-2 rounded-md text-sm font-medium border border-gray-200 bg-white hover:bg-gray-50 shadow-sm">Home</a>
                  {% endif %}

                  <a href="/support/" class="inline-flex items-center px-4 py-2 rounded-md text-sm font-medium bg-blue-600 text-white hover:bg-blue-700">Contact support</a>

                  <button id="copyUrlBtn" class="inline-flex items-center px-4 py-2 rounded-md text-sm font-medium border border-gray-200 bg-white hover:bg-gray-50 shadow-sm">Copy URL</button>
                </div>

                <p class="mt-4 text-sm text-gray-500">If this keeps happening, please report it to support with the URL and request ID below.</p>

                <div class="mt-4 text-xs text-gray-500 space-y-1">
                  <div>Request ID: <span class="font-medium text-gray-700">{{ request_id|default:"N/A" }}</span></div>
                  <div>Time: <span class="font-medium text-gray-700">{% now "j M Y H:i:s" %}</span></div>
                </div>
              </div>
            </div>

            <div class="hidden sm:block text-right text-xs text-gray-400">
              <div class="uppercase tracking-wide font-semibold">Need help?</div>
              <div class="mt-2">Email <a href="mailto:support@example.com" class="underline text-blue-600">support@example.com</a></div>
            </div>
          </div>

          {% if debug and error_debug %}
            <div class="mt-6 border border-red-100 bg-red-50 rounded-md p-4 text-sm text-red-800">
              <div class="font-medium mb-2">Debug details (visible only when debug is enabled):</div>
              <pre class="text-xs">{{ error_debug }}</pre>
            </div>
          {% endif %}
        </div>
      </div>

      <footer class="bg-gray-50 border-t border-gray-100 p-4 text-xs text-gray-500 flex items-center justify-between">
        <div>&copy; {% now "Y" %} Your Organisation</div>
        <div>Version: <span class="font-mono">{{ version|default:"dev" }}</span></div>
      </footer>
    </section>
  </main>

  <script>
    document.getElementById('copyUrlBtn').addEventListener('click', function() {
      if (navigator.clipboard) {
        navigator.clipboard.writeText(window.location.href).then(function() {
          alert('URL copied to clipboard');
        }, function() {
          alert('Could not copy URL');
        });
      } else {
        // Fallback
        var el = document.createElement('textarea');
        el.value = window.location.href;
        document.body.appendChild(el);
        el.select();
        try { document.execCommand('copy'); alert('URL copied to clipboard'); } catch(e) { alert('Could not copy URL'); }
        document.body.removeChild(el);
      }
    });
  </script>
</body>
</html>